## Codebase Patterns
- aiToolOptions array in commands.ts controls the quick pick UI - add new tools there alongside AI_TOOLS constant
- AI tool configuration uses `AI_TOOL_CONFIGS` in `aiConfig.ts` alongside `AI_TOOLS` constant in `aiTools.ts`
- When adding new AI tools: update both `AI_TOOLS`, `AI_TOOL_CONFIGS`, `getAiToolDefaultModel`, and package.json enum + model setting
- Run `nr update` after modifying package.json to regenerate VSCode metadata in `src/generated/meta.ts`
- `buildCommand()` is data-driven via `AI_TOOL_CONFIGS` - no switch/case needed for new tools

---

## 2026-01-11 - US-001
Thread: https://ampcode.com/threads/T-019babd6-d8b8-748b-834e-d2ecac254f14
- Added 'amp' to AI_TOOLS constant in aiTools.ts
- Added AMP case to getAiToolDefaultModel returning 'free'
- Also added AMP config to AI_TOOL_CONFIGS in aiConfig.ts (required for type completeness)
- Files changed: src/aiTools.ts, src/aiConfig.ts, tasks/prd.json
- **Learnings for future iterations:**
  - Adding a new tool to AI_TOOLS requires also adding to AI_TOOL_CONFIGS for type safety
  - The codebase pattern notes were accurate - buildCommand is data-driven
---

## 2026-01-11 - US-003
Thread: https://ampcode.com/threads/T-019babd6-d8b8-748b-834e-d2ecac254f14
- Added Amp to aiToolOptions array in commands.ts at line 765
- Files changed: src/commands.ts
---

## 2026-01-11 - US-004
Thread: https://ampcode.com/threads/T-019babd6-d8b8-748b-834e-d2ecac254f14
- Added 'amp' to aiTool enum in package.json
- Added vscode-code-notes.aiToolAmpModel setting with enum: free, rush, smart
- Ran nr update to regenerate src/generated/meta.ts
- Added AMP case to buildAICommand switch in aiReview.ts to read model config
- Files changed: package.json, src/generated/meta.ts, src/aiReview.ts
---
